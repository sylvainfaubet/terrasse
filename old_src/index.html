<!DOCTYPE html>
<html manifest="cache.manifest">
<head>
<title>test</title>
<meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=Edge" />

<meta name="viewport" content="width=device-width, initial-scale=1">

<link href="css/bootstrap.css" rel="stylesheet" />

</head>
<script data-main="js/require-config" src="js/lib/require.js"></script>


<body role="document">

	<script>
		var test = "${project.version}";
		console.log(test);

		function logEvent(a) {
			// 			console.log(a.type);
			switch (a.type) {
			case "checking":
				console.log("Vérification...");
				break;
			case "noupdate":
				console.log("Version à jour");
				break;
			case "progress":
				console.log("En cours");
				break;
			case "downloading":
				console.log("Téléchargement en cours...");
				break;
			case "cached":
				console.log("A jour");
				break;
			case "updateready":
				console.log("Mise à jour installée");
				break;
			case "obsolete":
				console.log("Version obsolete");
				break;
			case "error":
				console.log("Erreur");
				break;
			default:
				console.log("En attente...");
				break;
			}

			if (a.type == "updateready" || a.type == "cached") {
				window.location.reload();
			}
			if (a.lengthComputable) {
				console.log("total:" + a.total + "  loaded:" + a.loaded);
			}
			

		}

		if (window.applicationCache) {
			window.applicationCache.addEventListener("checking", logEvent,
					false);
			window.applicationCache.addEventListener("downloading", logEvent,
					false);
			window.applicationCache.addEventListener("noupdate", logEvent,
					false);
			window.applicationCache.addEventListener("progress", logEvent,
					false);
			window.applicationCache.addEventListener("error", logEvent, false);
			window.applicationCache.addEventListener("cached", logEvent, false);
			window.applicationCache.addEventListener("updateready", logEvent,
					false);
			window.applicationCache.addEventListener("obsolete", logEvent,
					false);
		}
	</script>

</body>
</html>
