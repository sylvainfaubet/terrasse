<div fxLayout.xs="column" fxLayout="row">
    <div class="drawing-zone" fxFlex>
        <svg (click)="onClick($event)" transform="scale(1,-1)" preserveAspectRatio="xMidYMid meet" [attr.viewBox]="getViewboxText()">
            <polygon *ngFor="let figure of project.polygons" [attr.fill]="config[figure.type].fill" [attr.stroke]="config[figure.type].stroke"
                stroke-width="0.1" [attr.points]="formatPoints(figure)"></polygon>
            <circle *ngFor="let p of currentPolygon.path;let last = last; let first= first" [attr.cx]="p.x" [attr.cy]="p.y"
                r="0.2" [attr.stroke]="last ? 'green' : first ? 'blue' : 'gray'" fill="transparent" stroke-width="0.1" />
            <defs>
                <pattern id="grid" width="1" height="1" patternUnits="userSpaceOnUse">
                    <path d="M 0 1 L 1 1 1 0" fill="none" stroke="gray" stroke-width="0.1" />
                </pattern>
            </defs>
            <rect width="100%" height="100%" fill="url(#grid)" />
        </svg>
    </div>
    <mat-card fxFlex="33">
        <div>
            <button mat-flat-button (click)="newPolygon(polygonTypes.Terrasse)">ajouter une terrasse</button>
            <button style="margin-left: 10px" mat-flat-button (click)="newPolygon(polygonTypes.Piscine)">ajouter une
                piscine</button>
        </div>
        <div>
            au clic :
            <mat-form-field>
                <mat-select [(value)]="mode">
                    <mat-option value="add">ajouter point</mat-option>
                    <mat-option value="delete">supprimer point</mat-option>
                </mat-select>
            </mat-form-field>
        </div>
        <div>
            édition de l'élément :
            <mat-form-field>
                <mat-select [(value)]="currentPolygon">
                    <mat-option *ngFor="let figure of project.polygons" [value]="figure">{{(figure.name || '') + ' ('+
                        figure.type+')'}}</mat-option>
                </mat-select>
            </mat-form-field>
        </div>
        <div>
            nom :
            <mat-form-field>
                <input matInput placeholder="nom" [(ngModel)]="currentPolygon.name">
            </mat-form-field>
        </div>
        <div>aire : {{getArea()}}</div>
        <div>perimetre : {{getPerimeter()}}</div>
    </mat-card>
</div>
