<div fxLayoutGap="10px" fxLayout="column">

    <mat-expansion-panel>
        <mat-expansion-panel-header>
            <mat-panel-title>
                Informations Dessins
            </mat-panel-title>
            <mat-panel-description>

            </mat-panel-description>
        </mat-expansion-panel-header>
        <terrasse-draw-info [draw]="currentDraw" [project]="project"></terrasse-draw-info>
    </mat-expansion-panel>

    <mat-expansion-panel>
        <mat-expansion-panel-header>
            <mat-panel-title>
                Dessins
            </mat-panel-title>
            <mat-panel-description>

            </mat-panel-description>
        </mat-expansion-panel-header>

        <div fxFlexFill fxLayoutGap="10px grid" fxLayout="row wrap" fxLayoutAlign="center center">

            <div fxFlex>
                <mat-form-field>
                    <mat-label>type de dessin à ajouter</mat-label>
                    <mat-select [(value)]="selectedDrawType">
                        <mat-option *ngFor="let type of drawTypes" [value]="type">{{type}}</mat-option>
                    </mat-select>
                </mat-form-field>
            </div>
            <div fxFlex>
                <button mat-flat-button color="primary" (click)="newDraw(selectedDrawType)">
                    ajouter une {{selectedDrawType}}
                </button>
            </div>
            <div fxFlex>
                <button mat-flat-button color="primary" [disabled]="isNotChangeable(currentDraw)"
                    (click)="changeDrawFirstElement(currentDraw)">
                    rotation des points
                </button>
            </div>
            <div fxFlex>
                <button mat-flat-button color="primary" [disabled]="isNotChangeable(currentDraw)"
                    (click)="reverseDraw(currentDraw)">
                    inversion du sens
                </button>
            </div>
            <div fxFlex>
                <button mat-flat-button color="primary" (click)="movePolygon(currentDraw.polygon)">
                    déplacer
                </button>
            </div>
            <div fxFlex>
                <button mat-flat-button color="primary" [disabled]="isOnlyOneDraw()" (click)="changeCurrentDraw()">
                    changer de dessin
                </button>
            </div>
            <div fxFlex fxFlex.xs="100">
                <button mat-flat-button color="primary" [disabled]="isOnlyOneDraw()" (click)="removeDraw(currentDraw)">
                    supprimer la {{currentDraw.type}}
                </button>
            </div>
        </div>

    </mat-expansion-panel>
    <mat-expansion-panel>
        <mat-expansion-panel-header>
            <mat-panel-title>
                Structure
            </mat-panel-title>
            <mat-panel-description>

            </mat-panel-description>
        </mat-expansion-panel-header>
        <terrasse-structure-config [(structure)]="currentDraw.structure"></terrasse-structure-config>
    </mat-expansion-panel>

    <mat-expansion-panel>
        <mat-expansion-panel-header>
            <mat-panel-title>
                Terrain
            </mat-panel-title>
            <mat-panel-description>

            </mat-panel-description>
        </mat-expansion-panel-header>
        <div fxFlexFill fxLayoutGap="10px grid" fxLayout="row wrap" fxLayoutAlign="center center">
            <mat-form-field>
                <input matInput placeholder="nom du projet" [(ngModel)]="project.name">
            </mat-form-field>
            <mat-form-field>
                <input matInput placeholder="Largeur du terrain" [(ngModel)]="project.zone.width">
            </mat-form-field>
            <mat-form-field>
                <input matInput placeholder="Longueur du terrain" [(ngModel)]="project.zone.height">
            </mat-form-field>
        </div>

    </mat-expansion-panel>

    <button mat-flat-button color="primary" (click)="saveProject()">sauvegarder</button>
    <button mat-flat-button color="primary" (click)="loadProject()">charger</button>
</div>
